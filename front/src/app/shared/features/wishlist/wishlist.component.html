<p-toast></p-toast>

<h1 class="text-center mb-4">Mes favoris</h1>

@if (wishlistItems().length === 0) {
    <div class="text-center p-4">
        <p class="text-secondary text-xl">Votre liste d'envie est vide</p>
    </div>
} @else {
    <div class="wishlist-list">
        @for (item of wishlistItems(); track item.id) {
            <div class="wishlist-item p-3 mb-3 surface-card border-round flex align-items-center gap-3">
                @if (item.product.image) {
                    <img [src]="item.product.image" [alt]="item.product.name" 
                         class="product-image" />
                } @else {
                    <div class="product-image-placeholder">
                        <i class="pi pi-image text-3xl text-secondary"></i>
                    </div>
                }
                
                <div class="flex-1">
                    <div class="text-lg font-bold mb-1">{{ item.product.name }}</div>
                    <div class="text-sm text-secondary mb-2">{{ item.product.category }}</div>
                    @if (item.product.description) {
                        <p class="text-sm text-secondary mb-2">{{ item.product.description }}</p>
                    }
                    <div class="flex align-items-center gap-3">
                        <span class="text-xl font-bold text-primary">{{ item.product.price }} â‚¬</span>
                        @if (item.product.rating) {
                            <span class="text-sm">
                                <i class="pi pi-star-fill text-yellow-500"></i>
                                {{ item.product.rating }}
                            </span>
                        }
                    </div>
                </div>
                
                <div class="flex align-items-center gap-2">
                    <p-button 
                        label="Ajouter au panier" 
                        icon="pi pi-shopping-cart" 
                        severity="success"
                        (onClick)="onAddToCart(item.product.id, 1)"
                        [pTooltip]="'Ajouter au panier'" />
                    <p-button 
                        icon="pi pi-trash" 
                        severity="danger" 
                        [styleClass]="'p-button-rounded p-button-text'"
                        (onClick)="onRemoveFromWishlist(item)"
                        [pTooltip]="'Retirer des favoris'" />
                </div>
            </div>
        }
    </div>
}
