<p-card [header]="product().name" [style]="{ width: '100%' }">
    <ng-template pTemplate="header">
        @if (product().image) {
            <img [src]="product().image" [alt]="product().name" style="width: 100%; height: 200px; object-fit: cover;" />
        }
    </ng-template>
    
    <div class="product-info">
        <div class="flex justify-content-between align-items-center mb-2">
            <span class="font-medium text-secondary text-sm">{{ product().category }}</span>
            <p-tag 
                [value]="getInventoryStatusLabel(product().inventoryStatus)" 
                [severity]="getInventoryStatusSeverity(product().inventoryStatus)" />
        </div>
        
        <div class="text-lg font-medium text-900 mb-2">{{ product().name }}</div>
        
        @if (product().description) {
            <p class="text-sm text-secondary mb-2">{{ product().description }}</p>
        }
        
        <div class="flex align-items-center gap-2 mb-2">
            <span class="text-2xl font-bold text-primary">{{ product().price }} €</span>
            @if (product().rating) {
                <span class="text-sm">
                    <i class="pi pi-star-fill text-yellow-500"></i>
                    {{ product().rating }}
                </span>
            }
        </div>
        
        @if (showQuantityControl()) {
            <div class="flex align-items-center gap-2 mb-3">
                <label class="text-sm">Quantité:</label>
                <p-inputNumber 
                    [(ngModel)]="_localQuantity" 
                    [min]="1" 
                    [max]="product().quantity"
                    [showButtons]="true"
                    (onInput)="onQuantityChange($event.value)"
                    styleClass="w-6rem" />
                <span class="text-sm text-secondary">(Stock: {{ product().quantity }})</span>
            </div>
        }
    </div>

    <ng-template pTemplate="footer">
        <div class="flex gap-2">
            @if (showQuantityControl()) {
                <p-button 
                    label="Mettre à jour" 
                    icon="pi pi-shopping-cart" 
                    severity="success" 
                    (onClick)="onAddToCart()"
                    [style]="{ flex: 1 }" />
                <p-button 
                    label="Retirer" 
                    icon="pi pi-trash" 
                    severity="danger" 
                    (onClick)="onRemoveFromCart()" />
            } @else {
                <p-button 
                    label="Ajouter au panier" 
                    icon="pi pi-shopping-cart" 
                    severity="success" 
                    (onClick)="onAddToCart()"
                    [style]="{ flex: 1 }" />
                <p-button 
                    [icon]="isInWishlist() ? 'pi pi-heart-fill' : 'pi pi-heart'"
                    [severity]="isInWishlist() ? 'danger' : 'secondary'"
                    [pTooltip]="isInWishlist() ? 'Retirer des favoris' : 'Ajouter aux favoris'"
                    (onClick)="onToggleWishlist()"
                    [styleClass]="'p-button-icon-only'" />
            }
        </div>
    </ng-template>
</p-card>
